NetworkSwitch AI Assistant – Production Design SpecificationProject Name: NetworkSwitch AI Assistant  Platform: Windows Desktop Application  Core Functionality: Serial-based CLI terminal with AI-powered multi-vendor network automation  Target Users: Network engineers and IT administrators managing multi-vendor environments---1. System Architecture```Presentation Layer├── Live CLI Terminal├── AI Chat Interface└── Session ManagerApplication Layer├── Multi-Vendor Session Service├── Device Manager└── AI Agent EngineVendor Abstraction Layer├── Cisco IOS Handler├── H3C Commware Handler├── Juniper JunOS Handler└── Huawei VRP HandlerData Layer├── SQLite Database├── Command History└── Vendor-Specific Config TemplatesHardware Layer├── Cisco Switches├── H3C Switches├── Juniper Switches└── Huawei Switches```---2. Technology StackCore Technologies:Primary Language: Python 3.9+GUI Framework: PySide6 (Qt for Python)Network Communication: Netmiko 4.1.2+ (multi-vendor support)AI/ML Framework: LangChain 0.1.0+Database: SQLite 3.35+Serial Communication: PySerial 3.5+Configuration Management: Pydantic 2.0+Async Support: Asyncio with QAsyncVendor-Specific Dependencies (requirements.txt):```PySide6>=6.6.0netmiko>=4.1.2        # Supports all target vendorslangchain>=0.1.0langchain-openai>=0.0.5pyserial>=3.5sqlalchemy>=2.0.0pydantic>=2.0.0structlog>=23.0.0python-dotenv>=1.0.0qasync>=0.24.0rich>=13.0.0jinja2>=3.0.0         # For configuration templatespyyaml>=6.0           # For vendor-specific configurations```---3. Project Structure```network_switch_ai_assistant/├── src/│   ├── main.py│   ├── core/│   │   ├── application.py│   │   ├── config.py│   │   └── constants.py│   ├── ui/│   │   ├── main_window.py│   │   └── components/│   │       ├── terminal_widget.py│   │       ├── chat_widget.py│   │       ├── session_panel.py│   │       ├── device_connection.py│   │       └── vendor_selection.py          # NEW│   ├── services/│   │   ├── ai_service.py│   │   ├── session_service.py│   │   ├── serial_service.py│   │   └── vendor_detection.py              # NEW│   ├── vendors/                             # NEW│   │   ├── base.py│   │   ├── cisco.py│   │   ├── h3c.py│   │   ├── juniper.py│   │   ├── huawei.py│   │   └── vendor_registry.py│   ├── agents/│   │   ├── base_agent.py│   │   ├── cisco_agent.py│   │   ├── h3c_agent.py                     # NEW│   │   ├── juniper_agent.py                 # NEW│   │   ├── huawei_agent.py                  # NEW│   │   └── prompts/│   │       ├── base_prompts.py│   │       ├── cisco_prompts.py│   │       ├── h3c_prompts.py               # NEW│   │       ├── juniper_prompts.py           # NEW│   │       └── huawei_prompts.py            # NEW│   ├── models/│   │   ├── device_models.py│   │   ├── session_models.py│   │   ├── ai_models.py│   │   └── vendor_models.py                 # NEW│   ├── database/│   │   └── repository.py│   └── utils/│       ├── logging.py│       ├── validators.py│       └── vendor_helpers.py                # NEW├── config/│   └── vendors/│       ├── cisco.yaml│       ├── h3c.yaml│       ├── juniper.yaml│       └── huawei.yaml├── templates/                               # NEW│   ├── cisco/│   ├── h3c/│   ├── juniper/│   └── huawei/└── resources/    └── vendors/                             # NEW        ├── cisco/        ├── h3c/        ├── juniper/        └── huawei/```---4. GUI Design OverviewMain Window FeaturesVendor-Aware Session Panel: Shows active sessions with vendor icon, model, COM port, and OSLive CLI Terminal: Color-coded output with vendor-specific syntax highlightingAI Assistant Panel: Context-aware responses based on current vendorCommand Input Bar with [Send], [AI Suggest], and [Vendor Help] buttonsCross-Vendor Command Translation Buttons: e.g., [Cisco], [Juniper] to translate commandsNew UI Components1. Vendor Selection PanelVendor icons and selection dropdownAuto-detection status indicatorVendor-specific settings toggleQuick vendor switching2. Vendor-Adaptive TerminalSyntax highlighting per vendorVendor-specific command auto-completionColor schemes by vendorContext-aware prompts3. Multi-Vendor AI ChatDisplays current vendor contextTranslates commands across vendorsRecommends vendor-specific best practicesShows comparative configurations---5. Enhanced Database Schemasessions```sqlCREATE TABLE sessions (    id INTEGER PRIMARY KEY AUTOINCREMENT,    session_id TEXT UNIQUE NOT NULL,    device_name TEXT,    com_port TEXT NOT NULL,    baud_rate INTEGER DEFAULT 9600,    vendor_type TEXT NOT NULL,  -- cisco, h3c, juniper, huawei    device_model TEXT,    os_version TEXT,    start_time DATETIME DEFAULT CURRENT_TIMESTAMP,    end_time DATETIME,    status TEXT DEFAULT 'active',    vendor_specific_data TEXT,  -- JSON    created_at DATETIME DEFAULT CURRENT_TIMESTAMP);```vendor_command_templates```sqlCREATE TABLE vendor_command_templates (    id INTEGER PRIMARY KEY AUTOINCREMENT,    vendor_type TEXT NOT NULL,    command_category TEXT NOT NULL,  -- interface, routing, security    template_name TEXT NOT NULL,    template_commands TEXT NOT NULL, -- JSON array    description TEXT,    parameters TEXT,                 -- JSON schema    created_at DATETIME DEFAULT CURRENT_TIMESTAMP);```command_history```sqlCREATE TABLE command_history (    id INTEGER PRIMARY KEY AUTOINCREMENT,    session_id TEXT NOT NULL,    vendor_type TEXT NOT NULL,    command_text TEXT NOT NULL,    command_type TEXT DEFAULT 'manual',    output_text TEXT,    success BOOLEAN DEFAULT TRUE,    vendor_context TEXT,            -- JSON    FOREIGN KEY(session_id) REFERENCES sessions(session_id));```vendor_knowledge_base```sqlCREATE TABLE vendor_knowledge_base (    id INTEGER PRIMARY KEY AUTOINCREMENT,    vendor_type TEXT NOT NULL,    topic TEXT NOT NULL,    content TEXT NOT NULL,    command_examples TEXT,          -- JSON array    best_practices TEXT,    common_issues TEXT,    created_at DATETIME DEFAULT CURRENT_TIMESTAMP);```cross_vendor_mappings```sqlCREATE TABLE cross_vendor_mappings (    id INTEGER PRIMARY KEY AUTOINCREMENT,    operation TEXT NOT NULL,        -- e.g., create_vlan, configure_interface    cisco_commands TEXT,    h3c_commands TEXT,    juniper_commands TEXT,    huawei_commands TEXT,    description TEXT,    created_at DATETIME DEFAULT CURRENT_TIMESTAMP);```---6. Vendor Abstraction LayerBase Vendor Interface```pythonclass BaseVendorHandler(ABC):    @abstractmethod    async def connect(self, com_port: str, baud_rate: int) -> bool: ...        @abstractmethod    async def disconnect(self) -> bool: ...        @abstractmethod    async def send_command(self, command: str, expect_string: str = None) -> str: ...        @abstractmethod    async def enter_config_mode(self) -> bool: ...        @abstractmethod    async def exit_config_mode(self) -> bool: ...        @abstractmethod    async def get_device_info(self) -> DeviceInfo: ...        @abstractmethod    def get_prompt_patterns(self) -> List[str]: ...        @abstractmethod    def normalize_command(self, command: str) -> str: ...```Vendor-Specific HandlersCisco IOS Handler:```pythonclass CiscoIOSHandler(BaseVendorHandler):    def enter_config_mode(self) -> bool:        return self.send_command("configure terminal", "config")        def get_prompt_patterns(self) -> List[str]:        return [r'\w+#', r'\w+$config$#', r'\w+$config-\w+$#']        def normalize_command(self, command: str) -> str:        return command.strip()```H3C Commware Handler:```pythonclass H3CCommwareHandler(BaseVendorHandler):    def enter_config_mode(self) -> bool:        return self.send_command("system-view", "view")        def get_prompt_patterns(self) -> List[str]:        return [r'<\w+>', r'$\w+$', r'$\w+-\w+$']        def normalize_command(self, command: str) -> str:        command = command.strip()        if command.startswith('sys'):            command = 'system-view'        return command```Juniper JunOS Handler:```pythonclass JuniperJunOSHandler(BaseVendorHandler):    def enter_config_mode(self) -> bool:        return self.send_command("configure", "configuration")        def get_prompt_patterns(self) -> List[str]:        return [r'\w+@\w+>', r'\w+@\w+#']        def normalize_command(self, command: str) -> str:        command = command.strip()        if command == 'config':            command = 'configure'        return command```Huawei VRP Handler:```pythonclass HuaweiVRPHandler(BaseVendorHandler):    def enter_config_mode(self) -> bool:        return self.send_command("system-view", "view")        def get_prompt_patterns(self) -> List[str]:        return [r'<\w+>', r'$\w+$', r'$\w+-\w+$']        def normalize_command(self, command: str) -> str:        command = command.strip()        if command.startswith('sys'):            command = 'system-view'        return command```---7. Multi-Vendor AI Agent SystemVendor-Specific Prompts```pythonVENDOR_SPECIFIC_CONTEXTS = {    "cisco": {        "system_prompt": "You are a Cisco IOS networking expert...",        "examples": [{"input": "configure vlan 10", "output": "vlan 10\\nname VLAN10"}]    },    "h3c": {        "system_prompt": "You are an H3C Comware networking expert...",        "examples": [{"input": "configure vlan 10", "output": "vlan 10\\ndescription VLAN10"}]    },    "juniper": {        "system_prompt": "You are a Juniper JunOS networking expert...",        "examples": [{"input": "configure vlan 10", "output": "set vlans VLAN10 vlan-id 10"}]    },    "huawei": {        "system_prompt": "You are a Huawei VRP networking expert...",        "examples": [{"input": "configure vlan 10", "output": "vlan 10\\ndescription VLAN10"}]    }}```Cross-Vendor Command Translation```pythonclass CrossVendorTranslator:    def translate_command(self, source_vendor: str, target_vendor: str, command: str) -> str:        # Implement translation logic using cross_vendor_mappings table        pass    def get_equivalent_commands(self, operation: str) -> Dict[str, str]:        # Returns mapped commands for Cisco, H3C, Juniper, Huawei        return {            "cisco": self._get_cisco_command(operation),            "h3c": self._get_h3c_command(operation),            "juniper": self._get_juniper_command(operation),            "huawei": self._get_huawei_command(operation)        }```---8. Vendor Configuration ManagementExample: config/vendors/h3c.yaml```yamlvendor: "h3c"display_name: "H3C Comware"default_baud_rate: 9600prompt_patterns:  - '<\w+>'  - '$\w+$'  - '$\w+-\w+$'command_aliases:  "sys": "system-view"  "dis": "display"  "int": "interface"initial_commands:  - "screen-length disable"safe_commands:  - "display"  - "ping"dangerous_commands:  - "reboot"  - "reset saved-configuration"```---9. Enhanced AI Capabilities| Capability | Details ||------------|---------|| **Vendor-Specific Expertise** | • **Cisco**: IOS/XE syntax, Catalyst/Nexus differences<br>• **H3C**: Comware 5/7, IRF stacking<br>• **Juniper**: Hierarchical config, commit/rollback<br>• **Huawei**: VRP versions, CSS stacking || **Cross-Vendor Operations** | Command translation, config migration, comparative analysis || **Vendor Detection** | Auto-detection via banner, prompt patterns, and command response |---10. Core Workflows1. Multi-Vendor Device Connection```User → Select COM Port → Auto Vendor Detection → Vendor-Specific Setup → UI Updates```2. Vendor-Aware AI Assistance```User Query → Detect Vendor → Load AI Agent → Generate Commands → (Optional: Cross-Vendor Translate) → User Review → Execute```3. Cross-Vendor Configuration Migration```Parse Source Config → Map to Target Vendor → Generate Commands → Validate → Apply```---11. Testing Strategy & DeploymentTest CategoriesVendor Detection Tests: Banner parsing, prompt recognitionVendor Command Tests: Normalization, config mode, syntaxCross-Vendor Translation Tests: Equivalence, migration accuracyDeployment FeaturesModular vendor pluginsVendor-specific icons, templates, and quick-start guidesPlatform-specific default configurations---12. Development Roadmap| Phase | Timeline | Key Deliverables ||-------|----------|------------------|| Multi-Vendor Foundation | Weeks 1–4 | Abstraction layer, vendor registry, detection || Core Vendor Implementations | Weeks 5–8 | Full support for Cisco, H3C, Juniper, Huawei || AI Multi-Vendor Support | Weeks 9–12 | Vendor agents, translation, migration tools || Advanced Features | Weeks 13–16 | Templating, bulk ops, analytics || Polish & Deployment | Weeks 17–20 | Testing, docs, packaging |---13. Risk MitigationKey Technical Risks & MitigationsCommand Variations → Use vendor-specific validation + safe modeConfig Differences → Test equivalent configs + rollback supportPlatform Compatibility → Maintain OS/version compatibility matricesVendor-Specific NotesH3C: Handle IRF vs standalone modeJuniper: Enforce commit/rollback workflowHuawei: Account for VRP 5 vs VRP 8Cisco: Differentiate IOS, IOS-XE, NX-OS---End of Document